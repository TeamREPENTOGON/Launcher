The patchgenerator is a tool that can be used to create a general purpose patch
to convert a set of source files into a set of destination files. The tool can
not only perform binary patching to convert files that are present in both the
source and destination sets, it can also create files that are not in the source
set but are present in the destination set and remove files that present in the
source set and are not present in the destination set.

In the context of REPENTOGON, this tool is used to perform seamless downgrades
of the Isaac installation in order to align the version started by the launcher
with the version supported by REPENTOGON.

# Foreword

* Let <CWD> be the current working directory of the tool.
* By default the tool searches for the source set of files in <CWD>/sources.
  This can be changed with the --source option.
* By default, the tool searches for the destination set of files in
  <CWD>/target. This can be changed with the --target option.
* By default, the tool creates an output folder <CWD>/output. This can be
  changed with the --output option.

# Dependencies

The tool depends on bsdiff4. You can install it through the normal means, e.g.
`pip install bsdiff4`. If you want an user local installation,
`pip install -u bsdiff4`.

# Usage

```bash
./creatediff.py [--source=SOURCE] [--target=TARGET] [--output=OUTPUT]`
```

* Flag `-n` can be used to perform a dry run: nothing will be created, but
  the entire program will still run.
* Flag `-y` can be given for automation. If given, the tool will not ask for
  confirmation before erasing the output folder if it already exists.
  
  NOTE: make sure you remove all tools/ patches from the manifest.json after its done, for better results, also dont forget to change the version on version.txt in the folder of the patch (and make sure it starts with v)

# REPENTOGON specifics

The patch to downgrade Isaac is stored inside the launcher itself. As a result,
it needs to be exposed to the build system in order to be embedded as a
resource.

1. Create a version.txt file in the output folder. This fille shall contain
   the version of the game that the patch targets (e.g.: "v.X.X.X.JXXXX").
2. Copy the contents of the output folder to the `patch` folder in the root of
   the launcher project. `$(git-root)/patch/manifest.json` shall correspond to
   the `manifest.json` generated by the tool.

# Warning

This tool only generates patches, it does not provide a way to apply them.
For a reference implementation, check the `standalone_rgon_folder.cpp` file
in `src` in the REPENTOGON launcher repo.
